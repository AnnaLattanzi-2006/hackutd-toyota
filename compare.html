<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GR Supra vs. Competition</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .compare-page {
      padding: 40px 60px;
      background-color: #fff;
    }

    .compare-header {
      margin-bottom: 40px;
    }

    .compare-header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: #111;
      margin-bottom: 20px;
    }

    .compare-models-btn {
      display: inline-block;
      padding: 12px 24px;
      background-color: #d50000;
      color: #fff;
      text-decoration: none;
      border-radius: 5px;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }

    .compare-models-btn:hover {
      background-color: #b30000;
    }

    .car-selection-area {
      display: flex;
      gap: 20px;
      margin-bottom: 40px;
      flex-wrap: wrap;
    }

    .car-display-box {
      flex: 1;
      min-width: 250px;
      background: #f8f8f8;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      position: relative;
    }

    .car-display-box img {
      width: 100%;
      max-width: 300px;
      border-radius: 8px;
      margin-bottom: 15px;
    }

    .car-display-box h3 {
      font-size: 1.1rem;
      margin: 10px 0 5px;
      color: #111;
    }

    .car-display-box p {
      font-size: 0.9rem;
      color: #666;
      margin: 5px 0;
    }

    .change-vehicle-link {
      color: #d50000;
      text-decoration: none;
      font-size: 0.9rem;
      margin-top: 10px;
      display: inline-block;
    }

    .change-vehicle-link:hover {
      text-decoration: underline;
    }

    .delete-car-button {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 30px;
      height: 30px;
      background-color: rgba(0, 0, 0, 0.6);
      color: #fff;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s ease;
    }

    .delete-car-button:hover {
      background-color: rgba(213, 0, 0, 0.8);
    }

    .add-car-button {
      width: 120px;
      height: 120px;
      background: #f0f0f0;
      border: 2px dashed #ccc;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 3rem;
      color: #666;
      flex-shrink: 0;
    }

    .add-car-button:hover {
      background: #e0e0e0;
      border-color: #d50000;
      color: #d50000;
    }

    .add-car-button.hidden {
      display: none;
    }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 40px;
    }

    .comparison-table th,
    .comparison-table td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    .comparison-table th {
      background-color: #f8f8f8;
      font-weight: 600;
      color: #111;
      width: 200px;
    }

    .comparison-table td {
      background-color: #fff;
      color: #666;
    }

    .comparison-table tr:last-child th,
    .comparison-table tr:last-child td {
      border-bottom: none;
    }

    .car-column {
      min-width: 200px;
      text-align: center;
    }

    .vehicle-popup-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .vehicle-popup-overlay.active {
      display: flex;
      opacity: 1;
    }

    .vehicle-popup {
      background: #fff;
      border-radius: 10px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .vehicle-popup h2 {
      font-size: 1.8rem;
      margin-bottom: 25px;
      color: #111;
    }

    .popup-dropdown-container {
      margin: 20px 0;
      text-align: left;
    }

    .popup-dropdown-label {
      display: block;
      font-weight: 600;
      color: #111;
      margin-bottom: 8px;
      font-size: 0.9rem;
    }

    .popup-dropdown-select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background-color: #fff;
      color: #111;
      font-size: 0.9rem;
      cursor: pointer;
      transition: border-color 0.3s ease;
    }

    .popup-dropdown-select:hover {
      border-color: #d50000;
    }

    .popup-dropdown-select:focus {
      outline: none;
      border-color: #d50000;
      box-shadow: 0 0 0 2px rgba(213, 0, 0, 0.1);
    }

    .popup-buttons {
      display: flex;
      gap: 15px;
      margin-top: 30px;
      justify-content: flex-end;
    }

    .popup-cancel-btn {
      padding: 12px 24px;
      background-color: #f0f0f0;
      color: #111;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .popup-cancel-btn:hover {
      background-color: #e0e0e0;
    }

    .popup-submit-btn {
      padding: 12px 24px;
      background-color: #ccc;
      color: #fff;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      font-weight: 600;
      cursor: not-allowed;
      transition: background-color 0.3s ease;
    }

    .popup-submit-btn.enabled {
      background-color: #d50000;
      cursor: pointer;
    }

    .popup-submit-btn.enabled:hover {
      background-color: #b30000;
    }
  </style>
</head>
<body>
  <header class="navbar">
    <div class="logo">
      <!--img src="https://1000logos.net/wp-content/uploads/2018/02/Toyota-logo.png" alt="Toyota Logo"-->
    </div>
    <nav class="nav-links">
      <a href="#">Vehicles</a>
      <a href="#">Shopping</a>
      <a href="#">Owners</a>
      <div class="user-icon">ðŸ‘¤</div>
    </nav>
  </header>

  <section class="compare-page">
    <div class="compare-header">
      <h1>GR Supra vs. Competition</h1>
      <a href="#" class="compare-models-btn">Compare GR Supra Models</a>
    </div>

    <div class="car-selection-area" id="carSelectionArea">
      <!-- Car display boxes will be added here -->
    </div>

    <table class="comparison-table">
      <thead>
        <tr>
          <th></th>
          <th class="car-column" id="carHeader1"></th>
          <th class="car-column" id="carHeader2"></th>
          <th class="car-column" id="carHeader3"></th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>Engine</th>
          <td id="engine1"></td>
          <td id="engine2"></td>
          <td id="engine3"></td>
        </tr>
        <tr>
          <th>Horsepower</th>
          <td id="horsepower1"></td>
          <td id="horsepower2"></td>
          <td id="horsepower3"></td>
        </tr>
        <tr>
          <th>Tank Capacity</th>
          <td id="tank1"></td>
          <td id="tank2"></td>
          <td id="tank3"></td>
        </tr>
        <tr>
          <th>Estimated Combined Fuel Economy</th>
          <td id="fuel1"></td>
          <td id="fuel2"></td>
          <td id="fuel3"></td>
        </tr>
        <tr>
          <th>Hybrid, Electric, or Gas</th>
          <td id="type1"></td>
          <td id="type2"></td>
          <td id="type3"></td>
        </tr>
        <tr>
          <th>Financing</th>
          <td id="financing1"></td>
          <td id="financing2"></td>
          <td id="financing3"></td>
        </tr>
        <tr>
          <th>Leasing</th>
          <td id="leasing1"></td>
          <td id="leasing2"></td>
          <td id="leasing3"></td>
        </tr>
      </tbody>
    </table>
  </section>

  <!-- Vehicle Selection Popup -->
  <div class="vehicle-popup-overlay" id="vehiclePopup">
    <div class="vehicle-popup">
      <h2>Select Vehicle</h2>
      <div class="popup-dropdown-container">
        <label class="popup-dropdown-label">Year</label>
        <select class="popup-dropdown-select" id="popupYear">
          <option value="">Select Year</option>
          <option value="2025">2025</option>
          <option value="2024">2024</option>
          <option value="2023">2023</option>
        </select>
      </div>
      <div class="popup-dropdown-container">
        <label class="popup-dropdown-label">Make</label>
        <select class="popup-dropdown-select" id="popupMake">
          <option value="">Select Make</option>
          <option value="Toyota">Toyota</option>
          <option value="Honda">Honda</option>
          <option value="Ford">Ford</option>
          <option value="Chevrolet">Chevrolet</option>
        </select>
      </div>
      <div class="popup-dropdown-container">
        <label class="popup-dropdown-label">Model</label>
        <select class="popup-dropdown-select" id="popupModel">
          <option value="">Select Model</option>
        </select>
      </div>
      <div class="popup-dropdown-container">
        <label class="popup-dropdown-label">Trim</label>
        <select class="popup-dropdown-select" id="popupTrim">
          <option value="">Select Trim</option>
        </select>
      </div>
      <div class="popup-buttons">
        <button class="popup-cancel-btn" onclick="closeVehiclePopup()">Cancel</button>
        <button class="popup-submit-btn" id="popupSubmitBtn" onclick="submitVehicleChange()" disabled>Submit</button>
      </div>
    </div>
  </div>

  <script>
    // Sample car data - you can expand this
    const defaultCar = {
      name: "2025 Toyota Supra 3.0",
      image: "https://tmna.aemassets.toyota.com/is/image/toyota/toyota/jellies/relative/2025/grsupra/base.png?bg=fff&fmt=webp&qlt=90&wid=345",
      engine: "3.0L Inline-6 Cyl. Turbo Engine",
      drive: "Rear-Wheel Drive",
      specs: {
        engine: "3.0L Inline-6 Cyl. Turbo",
        horsepower: "382 hp",
        tank: "13.7 gal",
        fuel: "23/31 MPG",
        type: "Gas",
        financing: "Available",
        leasing: "Available"
      }
    };

    let selectedCars = [];
    const maxCars = 3;

    function addCar() {
      if (selectedCars.length >= maxCars) return;

      selectedCars.push({ ...defaultCar });
      renderCars();
      updateComparisonTable();
    }

    function removeCar(index) {
      selectedCars.splice(index, 1);
      renderCars();
      updateComparisonTable();
    }

    function renderCars() {
      const carSelectionArea = document.getElementById('carSelectionArea');
      carSelectionArea.innerHTML = '';

      // Render existing cars
      selectedCars.forEach((car, index) => {
        const carBox = document.createElement('div');
        carBox.className = 'car-display-box';
        
        // Add delete button only for second and third cars (index 1 and 2)
        const deleteButton = index > 0 ? `<button class="delete-car-button" onclick="removeCar(${index})" title="Remove car">Ã—</button>` : '';
        
        carBox.innerHTML = `
          ${deleteButton}
          <img src="${car.image}" alt="${car.name}">
          <h3>${car.name}</h3>
          <p>${car.engine}</p>
          <p>${car.drive}</p>
          <a href="#" class="change-vehicle-link" onclick="changeVehicle(${index}); return false;">Change Vehicle</a>
        `;
        carSelectionArea.appendChild(carBox);
      });

      // Add "+" button if not at max
      if (selectedCars.length < maxCars) {
        const addButton = document.createElement('div');
        addButton.className = 'add-car-button';
        addButton.innerHTML = '+';
        addButton.onclick = addCar;
        carSelectionArea.appendChild(addButton);
      }

      // Add first car automatically if none exist
      if (selectedCars.length === 0) {
        addCar();
      }
    }

    function updateComparisonTable() {
      // Update headers
      for (let i = 1; i <= maxCars; i++) {
        const header = document.getElementById(`carHeader${i}`);
        if (i <= selectedCars.length) {
          header.textContent = selectedCars[i - 1].name;
          header.style.display = 'table-cell';
        } else {
          header.textContent = '';
          header.style.display = 'none';
        }
      }

      // Update data cells
      const specKeys = ['engine', 'horsepower', 'tank', 'fuel', 'type', 'financing', 'leasing'];
      const cellIds = ['engine', 'horsepower', 'tank', 'fuel', 'type', 'financing', 'leasing'];

      cellIds.forEach((key, keyIndex) => {
        for (let i = 1; i <= maxCars; i++) {
          const cell = document.getElementById(`${key}${i}`);
          if (i <= selectedCars.length) {
            cell.textContent = selectedCars[i - 1].specs[specKeys[keyIndex]] || '';
            cell.style.display = 'table-cell';
          } else {
            cell.textContent = '';
            cell.style.display = 'none';
          }
        }
      });
    }

    let currentVehicleIndex = null;

    function changeVehicle(index) {
      if (index === 0) {
        // First car: navigate back to index.html
        window.location.href = 'index.html';
      } else {
        // Second or third car: show popup
        currentVehicleIndex = index;
        openVehiclePopup();
      }
    }

    function openVehiclePopup() {
      const popup = document.getElementById('vehiclePopup');
      popup.classList.add('active');
      document.body.style.overflow = 'hidden';
      
      // Reset dropdowns
      document.getElementById('popupYear').value = '';
      document.getElementById('popupMake').value = '';
      document.getElementById('popupModel').value = '';
      document.getElementById('popupTrim').value = '';
      
      // Reset submit button
      const submitBtn = document.getElementById('popupSubmitBtn');
      submitBtn.disabled = true;
      submitBtn.classList.remove('enabled');
      
      // Add event listeners to dropdowns
      setupPopupDropdowns();
    }

    function closeVehiclePopup() {
      const popup = document.getElementById('vehiclePopup');
      popup.classList.remove('active');
      document.body.style.overflow = '';
      currentVehicleIndex = null;
    }

    // Close popup when clicking outside
    document.getElementById('vehiclePopup').addEventListener('click', function(e) {
      if (e.target === this) {
        closeVehiclePopup();
      }
    });

    // Close popup with Escape key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        const popup = document.getElementById('vehiclePopup');
        if (popup.classList.contains('active')) {
          closeVehiclePopup();
        }
      }
    });

    function setupPopupDropdowns() {
      const yearSelect = document.getElementById('popupYear');
      const makeSelect = document.getElementById('popupMake');
      const modelSelect = document.getElementById('popupModel');
      const trimSelect = document.getElementById('popupTrim');
      const submitBtn = document.getElementById('popupSubmitBtn');

      // Model options based on make
      const modelOptions = {
        'Toyota': ['Supra', 'Camry', 'Corolla', 'RAV4', 'Highlander'],
        'Honda': ['Civic', 'Accord', 'CR-V', 'Pilot'],
        'Ford': ['Mustang', 'F-150', 'Explorer', 'Escape'],
        'Chevrolet': ['Camaro', 'Silverado', 'Tahoe', 'Equinox']
      };

      // Trim options based on model
      const trimOptions = {
        'Supra': ['3.0', '3.0 Premium'],
        'Camry': ['LE', 'XLE', 'SE', 'XSE'],
        'Corolla': ['L', 'LE', 'XLE', 'SE'],
        'RAV4': ['LE', 'XLE', 'Adventure', 'Limited'],
        'Highlander': ['L', 'LE', 'XLE', 'Limited'],
        'Civic': ['LX', 'EX', 'Touring'],
        'Accord': ['LX', 'EX', 'Touring'],
        'CR-V': ['EX', 'EX-L', 'Touring'],
        'Pilot': ['LX', 'EX-L', 'Touring'],
        'Mustang': ['EcoBoost', 'GT', 'Shelby'],
        'F-150': ['XL', 'XLT', 'Lariat', 'Platinum'],
        'Explorer': ['Base', 'XLT', 'Limited', 'Platinum'],
        'Escape': ['S', 'SE', 'Titanium'],
        'Camaro': ['LT', 'SS', 'ZL1'],
        'Silverado': ['Work Truck', 'LT', 'LTZ', 'High Country'],
        'Tahoe': ['LS', 'LT', 'Premier'],
        'Equinox': ['L', 'LS', 'LT', 'Premier']
      };

      function updateModelOptions() {
        const make = makeSelect.value;
        modelSelect.innerHTML = '<option value="">Select Model</option>';
        trimSelect.innerHTML = '<option value="">Select Trim</option>';
        
        if (make && modelOptions[make]) {
          modelOptions[make].forEach(model => {
            const option = document.createElement('option');
            option.value = model;
            option.textContent = model;
            modelSelect.appendChild(option);
          });
        }
        checkSubmitButton();
      }

      function updateTrimOptions() {
        const model = modelSelect.value;
        trimSelect.innerHTML = '<option value="">Select Trim</option>';
        
        if (model && trimOptions[model]) {
          trimOptions[model].forEach(trim => {
            const option = document.createElement('option');
            option.value = trim;
            option.textContent = trim;
            trimSelect.appendChild(option);
          });
        }
        checkSubmitButton();
      }

      function checkSubmitButton() {
        const year = yearSelect.value;
        const make = makeSelect.value;
        const model = modelSelect.value;
        const trim = trimSelect.value;
        
        if (year && make && model && trim) {
          submitBtn.disabled = false;
          submitBtn.classList.add('enabled');
        } else {
          submitBtn.disabled = true;
          submitBtn.classList.remove('enabled');
        }
      }

      // Remove existing listeners and add new ones
      makeSelect.onchange = function() {
        updateModelOptions();
        checkSubmitButton();
      };
      
      modelSelect.onchange = function() {
        updateTrimOptions();
        checkSubmitButton();
      };
      
      yearSelect.onchange = checkSubmitButton;
      trimSelect.onchange = checkSubmitButton;
    }

    function submitVehicleChange() {
      const submitBtn = document.getElementById('popupSubmitBtn');
      if (submitBtn.disabled) return;

      const year = document.getElementById('popupYear').value;
      const make = document.getElementById('popupMake').value;
      const model = document.getElementById('popupModel').value;
      const trim = document.getElementById('popupTrim').value;

      // Update the selected car with the chosen vehicle
      if (currentVehicleIndex !== null && selectedCars[currentVehicleIndex]) {
        // Generate vehicle name
        const vehicleName = `${year} ${make} ${model} ${trim}`;
        
        // Get image URL (you can expand this with actual image mappings)
        let vehicleImage = defaultCar.image;
        if (make === 'Toyota' && model === 'Supra') {
          vehicleImage = 'https://tmna.aemassets.toyota.com/is/image/toyota/toyota/jellies/relative/2025/grsupra/base.png?bg=fff&fmt=webp&qlt=90&wid=345';
        } else if (make === 'Toyota' && model === 'Camry') {
          vehicleImage = 'https://tmna.aemassets.toyota.com/is/image/toyota/toyota/jellies/relative/2025/camry/base.png?bg=fff&fmt=webp&qlt=90&wid=345';
        } else if (make === 'Toyota' && model === 'Corolla') {
          vehicleImage = 'https://tmna.aemassets.toyota.com/is/image/toyota/toyota/jellies/relative/2025/corolla/base.png?bg=fff&fmt=webp&qlt=90&wid=345';
        }
        
        // Generate engine description based on model
        let engineDesc = `${model} Engine`;
        let engineSpec = `${model} Engine`;
        if (model === 'Supra') {
          engineDesc = '3.0L Inline-6 Cyl. Turbo Engine';
          engineSpec = '3.0L Inline-6 Cyl. Turbo';
        } else if (model === 'Camry') {
          engineDesc = '2.5L 4-Cylinder Engine';
          engineSpec = '2.5L 4-Cylinder';
        } else if (model === 'Corolla') {
          engineDesc = '2.0L 4-Cylinder Engine';
          engineSpec = '2.0L 4-Cylinder';
        }
        
        // Update the car object
        selectedCars[currentVehicleIndex] = {
          name: vehicleName,
          image: vehicleImage,
          engine: engineDesc,
          drive: 'Front-Wheel Drive', // Default, can be customized
          specs: {
            engine: engineSpec,
            horsepower: '--', // Can be filled with actual data
            tank: '--',
            fuel: '--',
            type: 'Gas',
            financing: 'Available',
            leasing: 'Available'
          }
        };
        
        // Re-render cars and update comparison table
        renderCars();
        updateComparisonTable();
      }

      closeVehiclePopup();
    }

    // Initialize page
    renderCars();
  </script>
</body>
</html>

